mapboxgl.accessToken = 'pk.eyJ1Ijoic29maWF2aWxsYXpvbiIsImEiOiJLZ2hJU0dVIn0.TCba--MdAt3klzuZKvlHfg';

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/sofiavillazon/ckleqa28702yz17qs00olmu5r',
  center: [-96, 37.8],
  zoom: 2
});


var geojson = {
	"features": [
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-75.951595,
			-7.538723
		  ],
		  "type": "Point"
		},
		"id": "01901f2c64303875c57f4ac60d7b4c56"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-76.771224,
			-5.682817
		  ],
		  "type": "Point"
		},
		"id": "17f0d6cab32e968ac301ead133294db0"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-94.474715,
			44.460986
		  ],
		  "type": "Point"
		},
		"id": "1ee0fc1010ce5a95f0e63da1fa2761e8"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-75.424621,
			-11.84632
		  ],
		  "type": "Point"
		},
		"id": "2b3789df8bcd4340f5d3de4dfd2908ae"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-106.488612,
			33.248439
		  ],
		  "type": "Point"
		},
		"id": "34d94d78a0ce88eb9e3ad01d191d1517"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-75.321035,
			-8.867674
		  ],
		  "type": "Point"
		},
		"id": "47c796726f09bcb7b5158d77d0447451"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-79.257262,
			-5.579732
		  ],
		  "type": "Point"
		},
		"id": "4ec423ddee542faaf5f7669338d51c93"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-77.807073,
			-4.54794
		  ],
		  "type": "Point"
		},
		"id": "591ff64e42eb081bfe877052b58c8c29"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-78.324998,
			-6.815462
		  ],
		  "type": "Point"
		},
		"id": "611a19d17d8c14158a1a090109b10514"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-86.291336,
			33.321215
		  ],
		  "type": "Point"
		},
		"id": "71b422857503e313414a8f943bcc4fff"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-52.568763,
			-13.285597
		  ],
		  "type": "Point"
		},
		"id": "75841f770925f2d278c12814ccd40776"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-78.221413,
			-7.945437
		  ],
		  "type": "Point"
		},
		"id": "89c33072b6668a3614d1aa777b1710f9"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-77.289149,
			-9.27683
		  ],
		  "type": "Point"
		},
		"id": "8b2b09a8d3c562478531bca62326f0e8"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-80.284387,
			38.94161
		  ],
		  "type": "Point"
		},
		"id": "9147fae34c28676617fcf5328c918a2a"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-75.21745,
			-3.307865
		  ],
		  "type": "Point"
		},
		"id": "9e1e9a495d472001d446e929f6426697"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-74.906696,
			-4.13479
		  ],
		  "type": "Point"
		},
		"id": "b2d37e20182513f49b5362765d858bd4"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-79.326758,
			45.140472
		  ],
		  "type": "Point"
		},
		"id": "b9b6ad6f47f7eac9a611943087f7b503"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-71.230436,
			51.928572
		  ],
		  "type": "Point"
		},
		"id": "c6a4be2b84e87d68eca2af5e8bea7f47"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-74.388771,
			-12.93538
		  ],
		  "type": "Point"
		},
		"id": "ca46df67959e9b749857a0c7c6e948d3"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-76.564054,
			-3.204447
		  ],
		  "type": "Point"
		},
		"id": "d4ed79d83fcc278969e827cc1ddde76d"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-90.034796,
			38.602242
		  ],
		  "type": "Point"
		},
		"id": "e68917721e8b1ef11d972d8c42d063d0"
	  },
	  {
		"type": "Feature",
		"properties": {
			"title": 'Evolución de Mamíferos...',
			"name": 'Aldo Marcelo Benites Palomino',
			"university": 'Universidad Nacional Mayor de San Marcos'
		},
		"geometry": {
		  "coordinates": [
			-88.641881,
			53.562053
		  ],
		  "type": "Point"
		},
		"id": "ec0db934a40d9d2b552d2b4de1600b54"
	  }
	],
	"type": "FeatureCollection"
  };


// add markers to map
geojson.features.forEach(function(marker) {

	// create a HTML element for each feature
	var el = document.createElement('div');
	el.className = 'marker';
  
	// make a marker for each feature and add to the map
	new mapboxgl.Marker(el)
		.setLngLat(marker.geometry.coordinates)
		.addTo(map);

	new mapboxgl.Marker(el)
		.setLngLat(marker.geometry.coordinates)
		.setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
			.setHTML('<h6>' + marker.properties.title + '</h6><h2>' + marker.properties.name + '</h2>'+ '<p>' + marker.properties.university + '</p>'+'<a class="ckickScientific"><i class="icon-arrow-right"></i></a>'))
		.addTo(map);

});


// // /// //////////////////////////////////// / /// / 

// Show an element
var show = function (elem) {
	elem.classList.add('show');
};

// Hide an element
var hide = function (elem) {
	elem.classList.remove('show');
};

// Toggle element visibility
var toggle = function (elem) {
	elem.classList.toggle('show');
};

var toggle = function (elem) {

	// If the element is visible, hide it
	if (window.getComputedStyle(elem).display === 'block') {
		hide(elem);
		return;
	}
    document.getElementById("popOptions").classList.remove('show');
    document.getElementById("modalFilter").classList.remove('show');
    document.getElementById("modalResults").classList.remove('show');
	// Otherwise, show it
	show(elem);

};

// Listen for click events
document.addEventListener('click', function (event) {
	
	
	if(!event.target.classList.contains('toggle')) return;
	
	if(event.target.classList.contains('toggle')){
		var content = document.querySelector(event.target.hash);
		event.preventDefault();
	}

	if(event.target.classList.contains('searchBox')){
		var content = document.querySelector(document.getElementById("searchBox").getAttribute("name"));
		console.log(content)
		event.preventDefault();
	}

	if(event.target.classList.contains('modalFilterButton')){
		var content = document.querySelector(document.getElementById("modalFilterButton").getAttribute("href"));
		event.preventDefault();
	}

	if(event.target.classList.contains('modalOptionsButton')){
		var content = document.querySelector(document.getElementById("modalOptionsButton").getAttribute("href"));
		event.preventDefault();
	}


	if (!content) return;

	toggle(content);
}, false);

/////////////////////////////////
var modalScientifics = new bootstrap.Modal(document.getElementById("scientifics"), {});

document.querySelector(".btnScientific").addEventListener("click", function () {
    modalScientifics.show();       
});



var modalMapache = new bootstrap.Modal(document.getElementById("mapache"), {});

document.querySelector(".activeModalMapache").addEventListener("click", function () {
    modalMapache.show();       
});

